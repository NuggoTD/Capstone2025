<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Andrew Heidelberger Construction</title>
    <link rel="stylesheet" href="Construction_styles.css">
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
    <header>
        <div class="container">
                <h1 id="company"><img id="logo" src="Images/Logo.png" alt="Logo for the website" />Andrew Heidelberger Construction</h1>
            <nav>
                <ul>
                    <a href="https://www.facebook.com/AndrewHeidelbergerConstruction" target="_blank"><img src="Images/fLogo.png" id="fLogo" alt="Facebook logo" /></a>
                    <li><a href="index.html" aria-current="page">Homepage</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li class="dropdown">
                        <a href="interior.html" class="dropbtn">Interiors</a>
                        <div class="dropdown-content">
                            <a href="kitchen.html">Kitchens</a>
                            <a href="bathroom.html">Bathrooms</a>
                            <a href="basement.html">Basements</a>
                            <a href="flooring.html">Flooring</a>
                            <a href="staircase_railing.html">Staircase + Railing</a>
                            <a href="addition.html">Additions</a>
                        </div>
                    </li>
                    <li class="dropdown">
                        <a href="exterior.html" class="dropbtn">Exteriors</a>
                        <div class="dropdown-content">
                            <a href="deck_patio.html">Decks + Patios</a>
                            <a href="window_door.html">Windows + Doors</a>
                            <a href="siding_roof.html">Siding + Roof</a>
                        </div>
                    </li>
                    <li><a href="portfolio.html">Portfolio</a></li>
                    <li><a href="contact.html">Contact Us</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div id="homeimg">
        <img id="wideimg" src="" alt="Image of a kitchen" />
    </div>

    <section id="intro" class="intro">
        <div class="container">
            <h2></h2>
            <p class="enhancing"></p>
        </div>
    </section>

    <div class="row">
        <div class="column">
            <h2></h2>
            <p class="enhancing"></p>
        </div>
        <div class="column2">
            <img id="house" src="" alt="Image of a house" />
        </div>
    </div>

    <section id="services" class="services">
        <div class="container">
            <h2>Our Services</h2>
            <div class="service-grid">
                <div class="service-item">
                    <a href="interior.html"><img src="" alt="Picture of a kitchen" /></a>
                    <h3>Interiors</h3>
                    <p class="enhancing">Services that are indoors</p>
                </div>
                <div class="service-item">
                    <a href="exterior.html"><img src="" alt="Picture of a deck" /></a>
                    <h3>Exteriors</h3>
                    <p class="enhancing">Services that are outdoors</p>
                </div>
            </div>
        </div>
    </section>

    <section id="portfolio" class="projects">
        <div class="container">
            <h2>Our Work</h2>
            <p class="enhancing">Take a look at some of our recent projects!</p>
            <div class="portfolio-grid">
                <img src="" alt="Project 1" />
                <img src="" alt="Project 2" />
                <img src="" alt="Project 3" />
                <img src="" alt="Project 4" />
                <img src="" alt="Project 5" />
                <img src="" alt="Project 6" />
            </div>
        </div>
    </section>

    <section id="contact" class="contact">
        <div class="row">
            <div class="column3">
                <h2></h2>
                <p class="enhancing2"></p>
                <a href="contact.html" id="cButton">Contact Us</a>
            </div>
            <div class="column2">
                <img id="bedroom" src="" alt="Image of a bedroom" />
            </div>
        </div>
    </section>

    <footer>
        <div class="row">
            <div class="column">
                <ul class="footerNav">
                    <li><a href="index.html" class="footerA" id="footerA">Homepage</a></li>
                    <li><a href="about.html" class="footerA" id="footerA">About Us</a></li>
                </ul>
                <div>
                    <p class="enhancing3">Andrew Heidelberger Construction is fully licensed through the State of Minnesota</p>
                </div>
                <p class="enhancing3">&copy; 2025 Andrew Heidelberger Construction | Licensed in MN</p>
            </div>
            <div class="column">
                <ul class="footerNav">
                    <li><a href="interior.html" class="footerA2">Interiors</a></li>
                    <li><a href="kitchen.html" class="footerB">Kitchens</a></li>
                    <li><a href="bathroom.html" class="footerB">Bathrooms</a></li>
                    <li><a href="basement.html" class="footerB">Basements</a></li>
                    <li><a href="flooring.html" class="footerB">Flooring</a></li>
                    <li><a href="staircase_railing.html" class="footerB">Staircase + Railing</a></li>
                    <li><a href="addition.html" class="footerB">Additions</a></li>
                </ul>
                <ul class="footerNav">
                    <li><a href="exterior.html" class="footerA2">Exteriors</a></li>
                    <li><a href="deck_patio.html" class="footerB">Decks + Patios</a></li>
                    <li><a href="window_door.html" class="footerB">Windows + Doors</a></li>
                    <li><a href="siding_roof.html" class="footerB">Siding + Roof</a></li>
                </ul>
            </div>
            <div class="column">
                <ul class="footerNav">
                    <li><a href="contact.html" class="footerA2" id="footerA2">Contact Us</a></li>
                </ul>
                <div class="cText">
                    <p class="enhancing3">Please reach out to us by email, text or call. We're happy to get in contact with you!</p>
                </div>
                <div class="cText">
                    <p class="enhancing3"><a href="mailto:andrew@andrewheidelbergerconstruction.com" id="footerB">andrew@andrewheidelbergerconstruction.com</a></p>
                    <p class="enhancing3">(763)291-4403</p>
                </div>
                <div>
                    <p class="enhancing3">Isanti, MN 55040</p>
                </div>
            </div>
            <a href="https://www.facebook.com/AndrewHeidelbergerConstruction" target="_blank"><img src="Images/fLogo.png" id="fLogo2" alt="Facebook logo" /></a>
        </div>
    </footer>
    <script>
        fetch("content/index.md")
          .then(res => res.text())
          .then(md => {
            const frontmatterMatch = md.match(/^---\n([\s\S]+?)\n---/);
            let metadata = {};
      
            if (frontmatterMatch) {
              const fm = frontmatterMatch[1];
              const lines = fm.split("\n");
              let currentKey = "";
              lines.forEach(line => {
                if (line.trim().startsWith("-")) {
                  if (!Array.isArray(metadata[currentKey])) metadata[currentKey] = [];
                  metadata[currentKey].push(line.replace(/^[-\s]+/, "").trim());
                } else if (line.includes(":")) {
                  const [key, ...rest] = line.split(":");
                  currentKey = key.trim();
                  metadata[currentKey] = rest.join(":").trim();
                } else if (currentKey && metadata[currentKey] && typeof metadata[currentKey] === "string") {
                  // handle folded lines (multiline)
                  metadata[currentKey] += "\n" + line.trim();
                }
              });
            }
      
            const cleanSrc = src => {
              const path = String(src || "").trim().replace(/^['"]+|['"]+$/g, "").replace(/^[-\s]+/, "");
              return path.startsWith("/") ? path : "/" + path;
            };
      
            document.getElementById("wideimg").src = cleanSrc(metadata.hero);
      
            const setText = (selector, value) => {
              const el = document.querySelector(selector);
              if (el && value) el.textContent = value.trim();
            };
      
            const setImage = (selector, value) => {
              const el = document.querySelector(selector);
              if (el && value) el.src = cleanSrc(value);
            };
      
            setText("#intro h2", metadata.intro_heading);
            setText("#intro p", metadata.intro_paragraph);
            setText(".column h2", metadata.column_heading);
            setText(".column p", metadata.column_paragraph);
            setText("#contact h2", metadata.contact_heading);
            setText("#contact .enhancing2", metadata.contact_paragraph);
      
            setImage("#house", metadata.column_image);
            setImage("#bedroom", metadata.bedroom_image);
      
            const serviceImgs = document.querySelectorAll(".service-grid img");
            if (Array.isArray(metadata.services)) {
              metadata.services.forEach((src, i) => {
                if (serviceImgs[i]) serviceImgs[i].src = cleanSrc(src);
              });
            }
      
            const portfolioImgs = document.querySelectorAll(".portfolio-grid img");
            if (Array.isArray(metadata.portfolio)) {
              metadata.portfolio.forEach((src, i) => {
                if (portfolioImgs[i]) portfolioImgs[i].src = cleanSrc(src);
              });
            }
          })
          .catch(err => console.error("Failed to load homepage content:", err));
      </script>
      
      <script>
        if (window.netlifyIdentity) {
          window.netlifyIdentity.on("init", user => {
            if (!user) {
              window.netlifyIdentity.on("login", () => {
                document.location.href = "/admin/";
              });
            }
          });
        }
      </script>
      
    
      
</body>
</html>