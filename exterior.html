<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Andrew Heidelberger Construction</title>
  <link rel="stylesheet" href="Construction_styles.css" />
</head>
<body>
  <header>
    <div class="container">
      <h1 id="company">
        <img id="logo" src="Images/Logo.png" alt="Logo for the website" />
        Andrew Heidelberger Construction
      </h1>
      <nav>
        <ul>
          <a href="https://www.facebook.com/AndrewHeidelbergerConstruction" target="_blank">
            <img src="Images/fLogo.png" id="fLogo" alt="Facebook logo" />
          </a>
          <li><a href="index.html">Homepage</a></li>
          <li><a href="about.html">About Us</a></li>
          <li class="dropdown">
            <a href="interior.html" class="dropbtn">Interiors</a>
            <div class="dropdown-content">
              <a href="kitchen.html">Kitchens</a>
              <a href="bathroom.html">Bathrooms</a>
              <a href="basement.html">Basements</a>
              <a href="flooring.html">Flooring</a>
              <a href="staircase_railing.html">Staircase + Railing</a>
              <a href="addition.html">Additions</a>
            </div>
          </li>
          <li class="dropdown">
            <a href="exterior.html" class="dropbtn" aria-current="page">Exteriors</a>
            <div class="dropdown-content">
              <a href="deck_patio.html">Decks + Patios</a>
              <a href="window_door.html">Windows + Doors</a>
              <a href="siding_roof.html">Siding + Roof</a>
            </div>
          </li>
          <li><a href="portfolio.html">Portfolio</a></li>
          <li><a href="contact.html">Contact Us</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <div id="homeimg">
    <img id="wideimg2" alt="Image of a kitchen" />
  </div>

  <section id="exterior">
    <div class="container">
      <h2></h2>
      <p class="enhancing"></p>
    </div>
  </section>

  <section id="services" class="services">
    <div class="container">
      <h2>Exterior Installations And Replacements</h2>
      <div class="service-grid">
        <div class="service-item">
          <a href="deck_patio.html"><img alt="Picture of a deck" /></a>
          <h3>Decks + Patios</h3>
        </div>
        <div class="service-item">
          <a href="window_door.html"><img alt="Picture of a door" /></a>
          <h3>Windows + Doors</h3>
        </div>
        <div class="service-item">
          <a href="siding_roof.html"><img alt="Picture of siding" /></a>
          <h3>Siding + Roof</h3>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="row">
      <div class="column">
        <ul class="footerNav">
          <li><a href="index.html" class="footerA" id="footerA">Homepage</a></li>
          <li><a href="about.html" class="footerA" id="footerA">About Us</a></li>
        </ul>
        <p class="enhancing3">Andrew Heidelberger Construction is fully licensed through the State of Minnesota</p>
        <p class="enhancing3">&copy; 2025 Andrew Heidelberger Construction | Licensed in MN</p>
      </div>
      <div class="column">
        <ul class="footerNav">
          <li><a href="interior.html" class="footerA2">Interiors</a></li>
          <li><a href="kitchen.html" class="footerB">Kitchens</a></li>
          <li><a href="bathroom.html" class="footerB">Bathrooms</a></li>
          <li><a href="basement.html" class="footerB">Basements</a></li>
          <li><a href="flooring.html" class="footerB">Flooring</a></li>
          <li><a href="staircase_railing.html" class="footerB">Staircase + Railing</a></li>
          <li><a href="addition.html" class="footerB">Additions</a></li>
        </ul>
        <ul class="footerNav">
          <li><a href="exterior.html" class="footerA2">Exteriors</a></li>
          <li><a href="deck_patio.html" class="footerB">Decks + Patios</a></li>
          <li><a href="window_door.html" class="footerB">Windows + Doors</a></li>
          <li><a href="siding_roof.html" class="footerB">Siding + Roof</a></li>
        </ul>
      </div>
      <div class="column">
        <ul class="footerNav">
          <li><a href="contact.html" class="footerA2" id="footerA2">Contact Us</a></li>
        </ul>
        <div class="cText">
          <p class="enhancing3">Please reach out to us by email, text or call. We're happy to get in contact with you!</p>
        </div>
        <div class="cText">
          <p class="enhancing3"><a href="mailto:andrew@andrewheidelbergerconstruction.com" id="footerB">andrew@andrewheidelbergerconstruction.com</a></p>
          <p class="enhancing3">(763)291-4403</p>
        </div>
        <p class="enhancing3">Isanti, MN 55040</p>
      </div>
      <a href="https://www.facebook.com/AndrewHeidelbergerConstruction" target="_blank">
        <img src="Images/fLogo.png" id="fLogo2" alt="Facebook logo" />
      </a>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    fetch("content/services/exterior.md")
      .then(res => res.text())
      .then(md => {
        const frontmatterMatch = md.match(/^---\n([\s\S]+?)\n---/);
        let metadata = {};
        let content = md;
  
        if (frontmatterMatch) {
          const fm = frontmatterMatch[1];
          content = md.slice(frontmatterMatch[0].length);
  
          const lines = fm.split("\n");
          let currentKey = "";
          lines.forEach(line => {
            if (line.trim().startsWith("-")) {
              if (!metadata[currentKey]) metadata[currentKey] = [];
              const value = line
                .replace(/^[-\s]+/, "")         // Remove leading `-` and spaces
                .replace(/^"|"$/g, "")          // Remove surrounding quotes
                .trim();
              metadata[currentKey].push(value);
            } else if (line.includes(":")) {
              const [key, ...rest] = line.split(":");
              currentKey = key.trim();
              const value = rest.join(":").trim().replace(/^"|"$/g, "");
              metadata[currentKey] = value;
            }
          });
        }
  
        console.log("Parsed metadata:", metadata);
  
        // Banner image
        const banner = document.getElementById("wideimg2");
        if (banner && metadata.image) {
          banner.src = metadata.image.trim();
        }
  
        // Heading
        const heading = document.querySelector("#exterior h2");
        if (heading && metadata.title) {
          heading.textContent = metadata.title;
        }
  
        // Paragraph
        const paragraph = document.querySelector("#exterior .enhancing");
        if (paragraph) {
          paragraph.innerHTML = marked.parse(content);
        }
  
        // Service images
        const serviceImgs = document.querySelectorAll(".service-grid img");
        if (Array.isArray(metadata.service_images)) {
          metadata.service_images.forEach((src, i) => {
            if (serviceImgs[i]) {
              const cleanedSrc = String(src)
                .replace(/^[-\s]+/, "")
                .replace(/^"|"$/g, "")
                .trim();
              console.log(`Injecting image ${i}: ${cleanedSrc}`);
              serviceImgs[i].src = cleanedSrc;
            }
          });
        } else {
          console.warn("No valid service_images array found.");
        }
      })
      .catch(err => {
        console.error("Failed to load exterior content:", err);
      });
  </script>
  
</body>
</html>
