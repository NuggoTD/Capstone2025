<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Andrew Heidelberger Construction</title>
  <link rel="stylesheet" href="Construction_styles.css">
</head>
<body>
  <header>
    <div class="container">
      <h1 id="company">
        <img id="logo" src="Images/Logo.png" alt="Logo for the website" />
        Andrew Heidelberger Construction
      </h1>
      <nav>
        <ul>
          <a href="https://www.facebook.com/AndrewHeidelbergerConstruction" target="_blank"><img src="Images/fLogo.png" id="fLogo" alt="Facebook logo" /></a>
          <li><a href="index.html">Homepage</a></li>
          <li><a href="about.html">About Us</a></li>
          <li class="dropdown">
            <a href="interior.html" class="dropbtn">Interiors</a>
            <div class="dropdown-content">
              <a href="kitchen.html">Kitchens</a>
              <a href="bathroom.html">Bathrooms</a>
              <a href="basement.html">Basements</a>
              <a href="flooring.html">Flooring</a>
              <a href="staircase_railing.html">Staircase + Railing</a>
              <a href="addition.html">Additions</a>
            </div>
          </li>
          <li class="dropdown">
            <a href="exterior.html" class="dropbtn">Exteriors</a>
            <div class="dropdown-content">
              <a href="deck_patio.html">Decks + Patios</a>
              <a href="window_door.html">Windows + Doors</a>
              <a href="siding_roof.html">Siding + Roof</a>
            </div>
          </li>
          <li><a href="portfolio.html" aria-current="page">Portfolio</a></li>
          <li><a href="contact.html">Contact Us</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <div id="homeimg">
    <img id="wideimg" src="Images/Patio2.png" alt="Image of a patio" />
  </div>

  <h2 id="pHeader">Portfolio</h2>

  <nav id="nPortfolio">
    <ul>
      <li><a href="#pKitchen">Kitchens</a></li>
      <li><a href="#pBathroom">Bathrooms</a></li>
      <li><a href="#pBasement">Basements</a></li>
      <li><a href="#pFlooring">Flooring</a></li>
      <li><a href="#pStaircase_railing">Staircase + Railing</a></li>
      <li><a href="#pAddition">Additions</a></li>
      <li><a href="#pDeck_patio">Decks + Patios</a></li>
      <li><a href="#pWindow_door">Windows + Doors</a></li>
      <li><a href="#pSiding_roof">Siding + Roof</a></li>
    </ul>
  </nav>

  <section id="portfolio">
    <div id="portfolio-container"></div>
  </section>

  <footer>
    <div class="row">
      <div class="column">
        <ul class="footerNav">
          <li><a href="index.html" class="footerA" id="footerA">Homepage</a></li>
          <li><a href="about.html" class="footerA" id="footerA">About Us</a></li>
        </ul>
        <div>
          <p class="enhancing3">Andrew Heidelberger Construction is fully licensed through the State of Minnesota</p>
        </div>
        <p class="enhancing3">&copy; 2025 Andrew Heidelberger Construction | Licensed in MN</p>
      </div>
      <div class="column">
        <ul class="footerNav">
          <li><a href="interior.html" class="footerA2">Interiors</a></li>
          <li><a href="kitchen.html" class="footerB">Kitchens</a></li>
          <li><a href="bathroom.html" class="footerB">Bathrooms</a></li>
          <li><a href="basement.html" class="footerB">Basements</a></li>
          <li><a href="flooring.html" class="footerB">Flooring</a></li>
          <li><a href="staircase_railing.html" class="footerB">Staircase + Railing</a></li>
          <li><a href="addition.html" class="footerB">Additions</a></li>
        </ul>
        <ul class="footerNav">
          <li><a href="exterior.html" class="footerA2">Exteriors</a></li>
          <li><a href="deck_patio.html" class="footerB">Decks + Patios</a></li>
          <li><a href="window_door.html" class="footerB">Windows + Doors</a></li>
          <li><a href="siding_roof.html" class="footerB">Siding + roofs</a></li>
        </ul>
      </div>
      <div class="column">
        <ul class="footerNav">
          <li><a href="contact.html" class="footerA2" id="footerA2">Contact Us</a></li>
        </ul>
        <div class="cText">
          <p class="enhancing3">Please reach out to us by email, text or call. We're happy to get in contact with you!</p>
        </div>
        <div class="cText">
          <p class="enhancing3"><a href="mailto:andrew@andrewheidelbergerconstruction.com" id="footerB">andrew@andrewheidelbergerconstruction.com</a></p>
          <p class="enhancing3">(763)291-4403</p>
        </div>
        <div>
          <p class="enhancing3">Isanti, MN 55040</p>
        </div>
      </div>
      <a href="https://www.facebook.com/AndrewHeidelbergerConstruction" target="_blank"><img src="Images/fLogo.png" id="fLogo2" alt="Facebook logo" /></a>
    </div>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const container = document.getElementById("portfolio-container");
  
      const categoryIdMap = {
        "Kitchens": "pKitchen",
        "Bathrooms": "pBathroom",
        "Basements": "pBasement",
        "Flooring": "pFlooring",
        "Staircase + Railing": "pStaircase_railing",
        "Additions": "pAddition",
        "Decks + Patios": "pDeck_patio",
        "Windows + Doors": "pWindow_door",
        "Siding + Roof": "pSiding_roof"
      };
  
      const filenameCategoryMap = {
        kitchen: "Kitchens",
        bathroom: "Bathrooms",
        basement: "Basements",
        flooring: "Flooring",
        staircase: "Staircase + Railing",
        railing: "Staircase + Railing",
        addition: "Additions",
        deck: "Decks + Patios",
        patio: "Decks + Patios",
        window: "Windows + Doors",
        door: "Windows + Doors",
        siding: "Siding + Roof",
        roof: "Siding + Roof"
      };
  
      fetch("content/index.json")
        .then(res => res.json())
        .then(files => {
          const fetches = files.map(file =>
            fetch(`content/portfolio/${file}`)
              .then(res => res.json())
              .then(project => {
                // Derive category from filename
                const lower = file.toLowerCase();
                const match = Object.entries(filenameCategoryMap).find(([key]) =>
                  lower.includes(key)
                );
                const category = match ? match[1] : "Uncategorized";
                return { ...project, category };
              })
          );
  
          Promise.all(fetches).then(projects => {
            Object.entries(categoryIdMap).forEach(([category, id]) => {
              const filtered = projects.filter(p => p.category === category);
              if (filtered.length > 0) {
                const section = document.createElement("div");
                section.id = id;
                section.className = "container";
                section.style.display = "none";
  
                const grid = document.createElement("div");
                grid.className = "portfolio-grid";
  
                filtered.forEach(project => {
                  if (Array.isArray(project.images)) {
                    project.images.forEach(imgObj => {
                      if (imgObj && imgObj.image && typeof imgObj.image === "string") {
                        const img = document.createElement("img");
                        img.src = imgObj.image.trim();
                        img.alt = project.title || "";
                        grid.appendChild(img);
                      }
                    });
                  }
                });
  
                section.appendChild(grid);
                container.appendChild(section);
              }
            });
  
            const showSectionFromHash = () => {
              const hash = window.location.hash.substring(1);
              document.querySelectorAll("#portfolio-container > div").forEach(div => {
                div.style.display = "none";
              });
              const section = document.getElementById(hash);
              if (section) {
                section.style.display = "flex";
              }
            };
  
            window.addEventListener("hashchange", showSectionFromHash);
            showSectionFromHash();
          });
        })
        .catch(err => {
          console.error("Error loading portfolio projects:", err);
          container.textContent = "Failed to load portfolio.";
        });
    });
  </script>
  
  
  
  
    
  
</body>
</html>
